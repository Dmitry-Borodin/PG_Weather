# –û—Ü–µ–Ω–∫–∞ –ª—ë—Ç–Ω–æ—Å—Ç–∏ ‚Äî –∫–∞–∫ —Å—á–∏—Ç–∞—é—Ç—Å—è –æ—á–∫–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã

**–í–µ—Ä—Å–∏—è:** 2.4

---

## 1. –û–±–∑–æ—Ä (v2.0)

–î–ª—è –∫–∞–∂–¥–æ–π –ª–æ–∫–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —á–∏—Å–ª–æ–≤–æ–π **score** –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π **status**.
–°—Ç–∞—Ç—É—Å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å—Ç–æ–∏—Ç –ª–∏ –µ—Ö–∞—Ç—å –≤ —ç—Ç–æ –º–µ—Å—Ç–æ –¥–ª—è XC closed route –ø–æ–ª—ë—Ç–∞.

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è v2.0 –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ v1.0

| –ê—Å–ø–µ–∫—Ç | v1.0 | v2.0 |
|--------|------|------|
| **–§–æ—Ä–º—É–ª–∞ score** | `-3√ócrit - 2√óbase - 1√óqual - 1√ódanger + 2√ópos` | Base score –æ—Ç thermal window + deductions + bonuses |
| **–ì–ª–∞–≤–Ω—ã–π –∫—Ä–∏—Ç–µ—Ä–∏–π** | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ —Ç—è–∂–µ—Å—Ç—å —Ñ–ª–∞–≥–æ–≤ | **–†–∞–∑–º–µ—Ä —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–≥–æ –æ–∫–Ω–∞** (—á–∞—Å—ã thermal activity) |
| **–í–µ—Å –ø–æ–∑–∏—Ç–∏–≤–æ–≤** | +2 –∑–∞ –∫–∞–∂–¥—ã–π | +1 –∑–∞ –∫–∞–∂–¥—ã–π |
| **Hard rule: –±–∞–∑–∞** | –ù–µ—Ç | base < 2000m MSL ‚Üí max MAYBE |
| **Multi-model** | –ù–µ—Ç | Per-model assessment: –µ—Å–ª–∏ –º–æ–¥–µ–ª—å ‚Üí NO-GO ‚Üí —É—Ö—É–¥—à–µ–Ω–∏–µ |
| **Meteo-Parapente** | –ù–µ—Ç | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: MP_STRONG_THERMALS / MP_WEAK_THERMALS |
| **Fallback chains** | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏ | Family-based (ICON D2‚ÜíEU‚ÜíGlobal, ECMWF 0.25‚Üí0.4) |

---

## 2. –°—Ç–∞—Ç—É—Å—ã (–æ—Ç –ª—É—á—à–µ–≥–æ –∫ —Ö—É–¥—à–µ–º—É)

| –°—Ç–∞—Ç—É—Å | Emoji | –ó–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–≥–¥–∞ (–ø–æ—Å–ª–µ hard rules) |
|--------|-------|----------|--------------------------|
| **STRONG** | üíö | Big day ‚Äî –≤—ã—Å–æ–∫–∏–µ —à–∞–Ω—Å—ã –Ω–∞ 150+ closed | score > 4 |
| **GO** | üü¢ | –£–≤–µ—Ä–µ–Ω–Ω—ã–π —à–∞–Ω—Å –Ω–∞ 100+ closed | score > 1 –∏ ‚â§ 4 |
| **MAYBE** | üü° | –í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏ —É–¥–∞—á–Ω–æ–º —Å—Ç–µ—á–µ–Ω–∏–∏ | score > ‚àí2 –∏ ‚â§ 1 |
| **UNLIKELY** | üü† | –ú–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ | score > ‚àí5 –∏ ‚â§ ‚àí2 |
| **NO-GO** | üî¥ | –ù–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ | score ‚â§ ‚àí5 –∏–ª–∏ hard rules |
| **NO DATA** | ‚ö™ | –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ü–µ–Ω–∫–∏ | tw_hours=0 –∏ 0 —Ñ–ª–∞–≥–æ–≤ –∏ 0 –ø–æ–∑–∏—Ç–∏–≤–æ–≤ |

–§–∏–Ω–∞–ª—å–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: STRONG ‚Üí GO ‚Üí MAYBE ‚Üí UNLIKELY ‚Üí NO-GO ‚Üí NO DATA.

---

## 3. –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ü–µ–Ω–∫–∏

### 3.1 Combined Hourly Profile

Merge –∏–∑ best-available –º–æ–¥–µ–ª–∏ –∫–∞–∂–¥–æ–≥–æ —Å–µ–º–µ–π—Å—Ç–≤–∞ (08:00‚Äì18:00 local).
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–ª–æ—ë–≤: `Best ICON > Best ECMWF > GFS` (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ priorities.md ¬ß4).

GFS-only –ø–æ–ª—è: `boundary_layer_height`, `lifted_index`, `convective_inhibition`.

`updraft` (–º/—Å) ‚Äî –Ω–∞—Ç–∏–≤–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä ICON D2 (2 –∫–º, ‚â§48—á): –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∫–æ–Ω–≤–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–æ—Å—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞ –æ—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –¥–æ 10 –∫–º. ICON EU/Global –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç null. –ë–æ–ª–µ–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —Ç–æ—á–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞, —á–µ–º —Ä–∞—Å—á—ë—Ç–Ω—ã–π Deardorff W*.

### 3.2 –†–∞—Å—á—ë—Ç–Ω—ã–µ –ø–æ–ª—è (per hour)

| –ü–æ–ª–µ | –§–æ—Ä–º—É–ª–∞ | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
|------|---------|-------------|
| `cloudbase_msl` | `125 √ó (T_2m ‚àí Td_2m) + elev` | temperature_2m, dewpoint_2m, location.elev |
| `lapse_rate` | `(T_850 ‚àí T_700) / 1.5` ¬∞C/km | temperature_850hPa, temperature_700hPa |
| `wstar` | Deardorff: `(g/T_K √ó BL_h √ó 0.4¬∑SWR / (1.1¬∑1005))^(1/3)`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **None** –µ—Å–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç ‚â§ 0 | boundary_layer_height (GFS), shortwave_radiation, temperature_2m |
| `updraft` | ICON native: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∫–æ–Ω–≤–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–æ—Å—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞ (–º/—Å) –æ—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –¥–æ 10 –∫–º | ICON D2 only (2 –∫–º, ‚â§48—á); EU/Global –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç null |
| `gust_factor` | `windgusts_10m ‚àí windspeed_10m` –º/—Å | windgusts_10m, windspeed_10m |

### 3.3 –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–∫–∞—Ü–∏–∏

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|----------|--------|
| `elev` | –í—ã—Å–æ—Ç–∞ —Å—Ç–∞—Ä—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ cloudbase_msl) | Lenggries = 700m |
| `peaks` | –í—ã—Å–æ—Ç–∞ –æ–∫—Ä—É–∂–∞—é—â–∏—Ö –≤–µ—Ä—à–∏–Ω (baseline –¥–ª—è margin) | Lenggries = 1800m |

---

## 4. Thermal Window Detection

–ò–∑ hourly profile (09:00+) –≤—ã–±–∏—Ä–∞—é—Ç—Å—è —á–∞—Å—ã, –≥–¥–µ **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**:
- W* ‚â• 1.5 –º/—Å
- precipitation ‚â§ 0.5 –º–º
- cloudbase_msl ‚â• 1000 –º MSL
- cloudcover < 70%

–†–µ–∑—É–ª—å—Ç–∞—Ç: `thermal_window` —Å –ø–æ–ª—è–º–∏:
- `start` / `end` ‚Äî –ø–µ—Ä–≤—ã–π –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç–µ—Ä–º–∏—á–µ—Å–∫–∏–π —á–∞—Å
- `duration_h` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–∫–∏—Ö —á–∞—Å–æ–≤ (`tw_hours`)
- `peak_hour` ‚Äî —á–∞—Å —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º lapse_rate (–ø—Ä–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π CAPE)
- `peak_lapse` / `peak_cape` ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è –≤ peak_hour

**`tw_hours` ‚Äî –≥–ª–∞–≤–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä –±–∞–∑–æ–≤–æ–≥–æ score –≤ v2.0.**

---

## 5. Flyable Window

–°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π **–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π** –æ—Ç—Ä–µ–∑–æ–∫ —á–∞—Å–æ–≤ (09:00‚Äì18:00), –≥–¥–µ **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**:
- precipitation ‚â§ 0.5 –º–º
- windgusts_10m ‚â§ 12 –º/—Å
- windspeed_10m ‚â§ 8 –º/—Å

–†–µ–∑—É–ª—å—Ç–∞—Ç: `continuous_flyable_hours`, `flyable_start`, `flyable_end`.

Flyable window ‚â† thermal window.
Flyable = –º–æ–∂–Ω–æ –ª–µ—Ç–µ—Ç—å (–Ω–µ —Å–¥—É–µ—Ç, –Ω–µ –∑–∞–ª—å—ë—Ç). Thermal = –µ—Å—Ç—å –ø–æ—Ç–æ–∫–∏ –¥–ª—è XC.

---

## 6. –§–ª–∞–≥–∏

–§–ª–∞–≥–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏–∑ hourly profile –ø–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ—Ä–æ–≥–∞–º.
–ö–∞–∂–¥—ã–π —Ñ–ª–∞–≥ = `(tag, message)`. –†–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ 4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.

### 6.1 Critical (–≤–µ—Å ‚àí3 –∑–∞ –∫–∞–∂–¥—ã–π)

| –§–ª–∞–≥ | –£—Å–ª–æ–≤–∏–µ | –ê–≥—Ä–µ–≥–∞—Ü–∏—è |
|------|---------|-----------|
| `SUSTAINED_WIND_850` | mean(windspeed_850hPa) > 5.0 –º/—Å | —Å—Ä–µ–¥–Ω–µ–µ –ø–æ –æ–∫–Ω—É 09‚Äì18 |
| `GUSTS_HIGH` | mean(windgusts_10m) > 10.0 –º/—Å | —Å—Ä–µ–¥–Ω–µ–µ –ø–æ –æ–∫–Ω—É 09‚Äì18 |
| `PRECIP_13` | precipitation @13:00 > 0.5 –º–º | —Ç–æ—á–∫–∞ 13:00 |
| `NO_FLYABLE_WINDOW` | continuous_flyable_hours = 0 | compute_flyable_window |

### 6.2 Low Base (–≤–µ—Å ‚àí2)

| –§–ª–∞–≥ | –£—Å–ª–æ–≤–∏–µ | –ê–≥—Ä–µ–≥–∞—Ü–∏—è |
|------|---------|-----------|
| `LOW_BASE` | min(cloudbase_msl) ‚àí peaks < 1000 –º | –º–∏–Ω–∏–º—É–º –ø–æ –æ–∫–Ω—É 09‚Äì18 |

### 6.3 Quality (–≤–µ—Å ‚àí1 –∑–∞ –∫–∞–∂–¥—ã–π)

| –§–ª–∞–≥ | –£—Å–ª–æ–≤–∏–µ | –ê–≥—Ä–µ–≥–∞—Ü–∏—è |
|------|---------|-----------|
| `OVERCAST` | cloudcover @13:00 > 80% | —Ç–æ—á–∫–∞ 13:00 |
| `STABLE` | mean(lapse_rate) < 5.5 ¬∞C/km | —Å—Ä–µ–¥–Ω–µ–µ –ø–æ –æ–∫–Ω—É 09‚Äì18 |
| `SHORT_WINDOW` | 0 < thermal_window_hours < 5 | thermal window detection |
| `GUST_FACTOR` | max(gust_factor) > 7.0 –º/—Å | –º–∞–∫—Å–∏–º—É–º –ø–æ –æ–∫–Ω—É 09‚Äì18 |

### 6.4 Danger (–≤–µ—Å ‚àí1 –∑–∞ –∫–∞–∂–¥—ã–π)

| –§–ª–∞–≥ | –£—Å–ª–æ–≤–∏–µ | –ê–≥—Ä–µ–≥–∞—Ü–∏—è |
|------|---------|-----------|
| `HIGH_CAPE` | max(cape) > 1500 J/kg | –º–∞–∫—Å–∏–º—É–º –ø–æ –æ–∫–Ω—É 09‚Äì18 |
| `CAPE_RISING` | late_cape > early √ó 1.5 **–∏** late > 800 | mean(capes[-2:]) vs mean(capes[:2]), –º–∏–Ω. 4 —Ç–æ—á–∫–∏ |
| `VERY_UNSTABLE` | lifted_index @13:00 < ‚àí4 | —Ç–æ—á–∫–∞ 13:00 (—Ç–æ–ª—å–∫–æ GFS) |

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: `CAPE_RISING` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å `HIGH_CAPE`.

### 6.5 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ (–¥–æ–±–∞–≤–ª—è—é—Ç—Å—è hard rules, v2.0)

| –§–ª–∞–≥ | –ò—Å—Ç–æ—á–Ω–∏–∫ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|----------|
| `LOW_BASE_HARD` | Hard Rule 3 | min base < 2000m MSL ‚Üí max MAYBE |
| `MODEL_DISAGREE` | Hard Rule 4 | –û–¥–Ω–∞+ –º–æ–¥–µ–ª—å ‚Üí NO-GO/UNLIKELY |
| `LOW_CONFIDENCE` | Hard Rule 5 | Model agreement LOW |
| `ENS_WIND_SPREAD` | Hard Rule 6 | Ensemble wind spread > 5 –º/—Å |
| `ENS_CAPE_SPREAD` | Hard Rule 6 | Ensemble CAPE spread > 1000 J/kg |
| `MP_WEAK_THERMALS` | MP integration | Meteo-Parapente: max thermal < 0.3, hours ‚â§ 1 |
| `MP_STRONG_THERMALS` | MP integration | (positive) max ‚â• 1.5 –º/—Å, hours ‚â• 3 |

---

## 7. –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (v2.2)

| –§–ª–∞–≥ | –í–µ—Å | –£—Å–ª–æ–≤–∏–µ | –ê–≥—Ä–µ–≥–∞—Ü–∏—è |
|------|-----|---------|------------|
| `STRONG_LAPSE` | +1 | max(lapse_rate) > 7.0 ¬∞C/km | –º–∞–∫—Å–∏–º—É–º –ø–æ –æ–∫–Ω—É 09‚Äì18 |
| `GOOD_CAPE` | +1 | 300 < max(cape) < 1500 J/kg | –º–∞–∫—Å–∏–º—É–º –ø–æ –æ–∫–Ω—É 09‚Äì18 |
| `DEEP_BL` | +1 | max(boundary_layer_height) > 1500 –º | –º–∞–∫—Å–∏–º—É–º –ø–æ –æ–∫–Ω—É (GFS) |
| `HIGH_BASE` | +1 | max(cloudbase_msl) ‚àí peaks > 1500 –º | –º–∞–∫—Å–∏–º—É–º –ø–æ –æ–∫–Ω—É 09‚Äì18 |
| `VERY_HIGH_BASE` | **+2** | max(cloudbase_msl) > 3500 –º MSL | –º–∞–∫—Å–∏–º—É–º –ø–æ –æ–∫–Ω—É 09‚Äì18 |
| `LONG_WINDOW` | +1 | thermal_window_hours ‚â• 7 | thermal window detection |
| `CLEAR_SKY` | +1 | cloudcover @13:00 < 30% | —Ç–æ—á–∫–∞ 13:00 |
| `GOOD_WSTAR` | +1 | max(W*) ‚â• 1.5 –º/—Å | –º–∞–∫—Å–∏–º—É–º –ø–æ –æ–∫–Ω—É (GFS) |
| `STRONG_SUN` | +1 | max(shortwave_radiation) > 600 W/m¬≤ | –º–∞–∫—Å–∏–º—É–º –ø–æ –æ–∫–Ω—É 09‚Äì18 |

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: `VERY_HIGH_BASE` –∏ `HIGH_BASE` –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ ‚Äî –µ—Å–ª–∏ –±–∞–∑–∞ > 3500m, —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç VERY_HIGH_BASE (+2).

---

## 8. Model Agreement

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ **–ª—É—á—à–µ–π –¥–æ—Å—Ç—É–ø–Ω–æ–π ECMWF** vs **–ª—É—á—à–µ–π –¥–æ—Å—Ç—É–ø–Ω–æ–π ICON** at 13:00 local.

–í v2.0 –º–æ–¥–µ–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ (–∫–∞–∫–∞—è —É—Å–ø–µ–ª–∞ –≤ fallback chain):

```
Best ECMWF: ecmwf_ifs025 ‚Üí ecmwf_ifs04 ‚Üí ecmwf_hres(legacy)
Best ICON:  icon_d2 ‚Üí icon_eu ‚Üí icon_global ‚Üí icon_seamless(legacy)
```

### –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –¥–æ–ø—É—Å–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ–ø—É—Å–∫ |
|----------|--------|
| temperature_2m | ¬±2.0 ¬∞C |
| windspeed_10m | ¬±2.0 –º/—Å |
| windgusts_10m | ¬±3.0 –º/—Å |
| cloudcover | ¬±20% |
| precipitation | ¬±0.5 –º–º |
| cape | ¬±200 J/kg |
| windspeed_850hPa | ¬±2.0 –º/—Å |

### –§–æ—Ä–º—É–ª–∞

```
agreement_score = count(agree) / count(total)
```

### Confidence

| Score | Confidence |
|-------|-----------|
| ‚â• 0.80 | HIGH |
| ‚â• 0.50 | MEDIUM |
| < 0.50 | LOW |
| –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö | UNKNOWN |

---

## 9. Ensemble Uncertainty

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–Ω—Å–∞–º–±–ª—è (ECMWF ENS, ICON-EU EPS) at 13:00 local ‚Äî
–ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º `temperature_2m, windspeed_10m, windgusts_10m, cloudcover, precipitation, cape, windspeed_850hPa`:

- `p10`, `p50`, `p90`, `spread` (= p90 ‚àí p10)

–ë–æ–ª—å—à–æ–π spread ‚Üí –ø–æ–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —á–µ—Ä–µ–∑ hard rules 6.

---

## 10. –§–æ—Ä–º—É–ª–∞ Score (v2.0 ‚Äî REDESIGNED)

### 10.1 Base Score: Thermal Window

–û—Å–Ω–æ–≤–Ω–æ–π –≤–∫–ª–∞–¥ –≤ score —Ç–µ–ø–µ—Ä—å ‚Äî **—Ä–∞–∑–º–µ—Ä —Ç–µ—Ä–º–∏—á–µ—Å–∫–æ–≥–æ –æ–∫–Ω–∞** (`tw_hours`):

| tw_hours | base_score | –õ–æ–≥–∏–∫–∞ |
|----------|------------|--------|
| 0 | ‚àí6 | –ù–µ—Ç —Ç–µ—Ä–º–∏–∫–æ–≤ ‚Üí NO-GO territory |
| 1‚Äì2 | ‚àí2 | –°–ª–∞–±—ã–µ —Ç–µ—Ä–º–∏–∫–∏ ‚Üí UNLIKELY |
| 3‚Äì4 | +1 | –ü—Ä–∏–µ–º–ª–µ–º—ã–π –¥–µ–Ω—å ‚Üí MAYBE+ |
| 5‚Äì6 | +4 | –•–æ—Ä–æ—à–∏–π –¥–µ–Ω—å ‚Üí GO |
| 7+ | +6 | –û—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å ‚Üí STRONG territory |

### 10.2 Deductions (–≤—ã—á–∏—Ç–∞—é—Ç—Å—è –∏–∑ base_score)

```
score = base_score
      - 3 √ó n_critical
      - 2 √ó n_low_base
      - 1 √ó n_quality
      - 1 √ó n_danger
```

### 10.3 Bonuses

```
score += 1 √ó n_positive    (–∫–∞–∂–¥—ã–π –ø–æ–∑–∏—Ç–∏–≤ = +1, —Å–Ω–∏–∂–µ–Ω–æ —Å +2 –≤ v1.0)
```

### 10.4 –ü–æ—Ä–æ–≥–∏ score ‚Üí status

| –î–∏–∞–ø–∞–∑–æ–Ω | Status |
|----------|--------|
| ‚â§ ‚àí5 | NO-GO |
| ‚àí4 ‚Ä¶ ‚àí2 | UNLIKELY |
| ‚àí1 ‚Ä¶ 1 | MAYBE |
| 2 ‚Ä¶ 4 | GO |
| ‚â• 5 | STRONG |

### 10.5 –ü—Ä–∏–º–µ—Ä—ã v2.0

| –°–∏—Ç—É–∞—Ü–∏—è | tw_hours | base | Deductions | Positives | Score | Status (–¥–æ hard rules) |
|----------|----------|------|------------|-----------|-------|----------------------|
| Big XC day | 8 | +6 | 0 | 5√ó(+1) | +11 | STRONG |
| –•–æ—Ä–æ—à–∏–π –¥–µ–Ω—å, –≤–µ—Ç–µ—Ä–æ–∫ | 6 | +4 | WIND_850(‚àí3) | 3√ó(+1) | +4 | GO |
| –°—Ä–µ–¥–Ω–∏–π –¥–µ–Ω—å | 4 | +1 | OVERCAST(‚àí1) | 2√ó(+1) | +2 | GO |
| –°–ª–∞–±—ã–π | 3 | +1 | STABLE(‚àí1), SHORT_WINDOW(‚àí1) | 1√ó(+1) | 0 | MAYBE |
| –ü–ª–æ—Ö–æ–π | 2 | ‚àí2 | GUSTS_HIGH(‚àí3), LOW_BASE(‚àí2) | 1√ó(+1) | ‚àí6 | NO-GO |
| –ù–µ—Ç —Ç–µ—Ä–º–∏–∫–æ–≤ | 0 | ‚àí6 | OVERCAST(‚àí1) | 0 | ‚àí7 | NO-GO |

---

## 11. Hard Rules (–ø–æ–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞)

Score-based —Å—Ç–∞—Ç—É—Å –º–æ–∂–µ—Ç –±—ã—Ç—å **–ø–æ–Ω–∏–∂–µ–Ω** –∂—ë—Å—Ç–∫–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏.
–ü–æ–≤—ã—à–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ. –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ**.

### Rule 1: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ critical ‚Üí NO-GO

```
IF n_critical ‚â• 2  OR  (n_critical ‚â• 1 AND n_low_base ‚â• 1):
    status = "NO-GO"
```

### Rule 2: –û–¥–∏–Ω critical –ø—Ä–∏ —Ö–æ—Ä–æ—à–µ–º score ‚Üí MAYBE

```
IF n_critical ‚â• 1  AND  status IN ("GO", "STRONG"):
    status = "MAYBE"
```

### Rule 3 (v2.0): –ù–∏–∑–∫–∞—è –±–∞–∑–∞ ‚Üí max MAYBE ‚≠ê

```
IF cloudbase_min < 2000 m MSL  AND  status IN ("GO", "STRONG"):
    status = "MAYBE"
    + —Ñ–ª–∞–≥ LOW_BASE_HARD
```

–õ–æ–≥–∏–∫–∞: –±–∞–∑–∞ –Ω–∏–∂–µ 2000m = –Ω–µ—Ç —Å–µ—Ä—å—ë–∑–Ω–æ–≥–æ XC. –î–∞–∂–µ –µ—Å–ª–∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
–∏–¥–µ–∞–ª—å–Ω—ã ‚Äî MAYBE –º–∞–∫—Å–∏–º—É–º.

### Rule 4 (v2.0): Per-model disagreement ‚Üí worsen ‚≠ê

```
bad_models = –º–æ–¥–µ–ª–∏ —Å assess_per_model().status IN ("NO-GO", "UNLIKELY")

IF bad_models  AND  status IN ("GO", "STRONG"):
    score -= len(bad_models)
    + —Ñ–ª–∞–≥ MODEL_DISAGREE

    IF len(bad_models) >= 2:
        status = "UNLIKELY"
    ELSE:
        status = "MAYBE"
```

–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å per_model_assessments (—Ç.–µ. ‚â•2 –º–æ–¥–µ–ª–∏).

### Rule 5: –ù–∏–∑–∫–∞—è –º–æ–¥–µ–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å ‚Üí MAYBE

```
IF model_agreement.confidence == "LOW"  AND  status IN ("GO", "STRONG"):
    status = "MAYBE"
    + —Ñ–ª–∞–≥ LOW_CONFIDENCE
```

### Rule 6: –ë–æ–ª—å—à–æ–π –∞–Ω—Å–∞–º–±–ª–µ–≤—ã–π —Ä–∞–∑–±—Ä–æ—Å ‚Üí MAYBE

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–Ω—Å–∞–º–±–ª—è:

```
IF wind_spread > 5 –º/—Å  AND  status IN ("GO", "STRONG"):
    status = "MAYBE"  +  ENS_WIND_SPREAD

IF cape_spread > 1000 J/kg  AND  status IN ("GO", "STRONG"):
    status = "MAYBE"  +  ENS_CAPE_SPREAD
```

### Rule 7: –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö

```
IF n_critical == 0  AND  n_quality == 0  AND  n_positive == 0  AND  tw_hours == 0:
    status = "NO DATA"
```

### –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

1. Score ‚Üí –±–∞–∑–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
2. Rule 1 (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ critical ‚Üí NO-GO)
3. Rule 2 (–æ–¥–∏–Ω critical + GO/STRONG ‚Üí MAYBE)
4. Rule 3 (base < 2000m ‚Üí MAYBE) ‚≠ê v2.0
5. Rule 4 (per-model disagree ‚Üí worsen) ‚≠ê v2.0
6. Rule 5 (LOW confidence ‚Üí MAYBE)
7. Rule 6 (ensemble spread ‚Üí MAYBE)
8. Rule 7 (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö ‚Üí NO DATA)

---

## 12. Per-Model Assessment (v2.0) ‚≠ê

–ü–æ–º–∏–º–æ combined assessment, –¥–ª—è –∫–∞–∂–¥–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ–π –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ–ª–∏
—Å—Ç—Ä–æ–∏—Ç—Å—è **—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞** —á–µ—Ä–µ–∑ `assess_per_model()`:

### 12.1 –ú–æ–¥–µ–ª–∏ –¥–ª—è per-model assessment

–í—Å–µ, —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `sources` —Å `_hourly_raw`:

```
icon_d2, icon_eu, icon_global, ecmwf_ifs025, ecmwf_ifs04, gfs_seamless
(+ legacy: ecmwf_hres, icon_seamless, gfs)
```

### 12.2 –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ per-model

–î–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è:
- `flyable_hours` = `compute_flyable_window(model_profile)`
- `thermal_hours` = `_detect_thermal_window(model_profile, loc).duration_h`
- Quick checks: wind_850 mean > 5, precip @13 > 0.5

| –£—Å–ª–æ–≤–∏–µ | Per-model status |
|---------|-----------------|
| precip @13 > 0.5 OR flyable = 0 OR high_wind | NO-GO |
| thermal ‚â§ 2 OR flyable < 4 | UNLIKELY |
| thermal ‚â§ 4 | MAYBE |
| thermal > 4 | GO |

### 12.3 –í–ª–∏—è–Ω–∏–µ –Ω–∞ –æ–±—â–∏–π score

Per-model assessments –≤–ª–∏—è—é—Ç –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ Hard Rule 4:
- –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –¥–∞–ª–∞ NO-GO –∏–ª–∏ UNLIKELY ‚Äî score –ø–æ–Ω–∏–∂–∞–µ—Ç—Å—è –Ω–∞ 1 –∑–∞ –∫–∞–∂–¥—É—é —Ç–∞–∫—É—é –º–æ–¥–µ–ª—å
- –ï—Å–ª–∏ ‚â•2 –º–æ–¥–µ–ª–∏ ‚Üí status UNLIKELY
- –ï—Å–ª–∏ 1 –º–æ–¥–µ–ª—å ‚Üí status MAYBE

–≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ combined profile (best-of-all) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç GO,
–Ω–æ –æ–¥–Ω–∞ –∏–∑ –º–æ–¥–µ–ª–µ–π –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–∞—ë—Ç NO-GO.

---

## 13. Meteo-Parapente Integration (v2.0) ‚≠ê

### 13.1 –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

`integrate_meteo_parapente()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è **–ø–æ—Å–ª–µ** headless scraper merge,
–∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ MP —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `result["sources"]["meteo_parapente"]`.

### 13.2 –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è

–ò–∑ –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω–æ–≥–æ API –æ—Ç–≤–µ—Ç–∞ (`data.php` ‚Üí JSON):
- `ths` ‚Äî –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ—Ä–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ –≤—ã—Å–æ—Ç–∞–º (–º/—Å)
- `z` ‚Äî –≤—ã—Å–æ—Ç–Ω–∞—è —à–∫–∞–ª–∞
- `pblh` ‚Äî –≤—ã—Å–æ—Ç–∞ –ø–æ–≥—Ä–∞–Ω–∏—á–Ω–æ–≥–æ —Å–ª–æ—è

### 13.3 –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `mp_max_thermal_ms` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–µ—Ä–º–∏—á–µ—Å–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞ –æ–∫–Ω–æ 09‚Äì17 |
| `mp_thermal_top_m` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ —Å –≤–æ—Å—Ö–æ–¥—è—â–∏–º –ø–æ—Ç–æ–∫–æ–º |
| `mp_thermal_hours` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤ —Å thermal ‚â• 0.5 –º/—Å |
| `mp_pblh_max_m` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ PBL |

### 13.4 –í–ª–∏—è–Ω–∏–µ –Ω–∞ score

| –£—Å–ª–æ–≤–∏–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| max_thermal ‚â• 1.5 AND thermal_hours ‚â• 3 | +1 score, positive `MP_STRONG_THERMALS` |
| max_thermal < 0.3 AND thermal_hours ‚â§ 1 | ‚àí1 score, flag `MP_WEAK_THERMALS`, GO/STRONG ‚Üí MAYBE |

---

## 14. –õ–æ–∫–∞—Ü–∏–∏ –∏ –∏—Ö peaks

| –õ–æ–∫–∞—Ü–∏—è | Elev (launch) | Peaks (ceiling ref) | Margin 1000m = base MSL |
|---------|---------------|---------------------|-------------------------|
| Lenggries | 700 –º | 1800 –º | ‚â• 2800 –º |
| Wallberg | 1620 –º | 1722 –º | ‚â• 2722 –º |
| K√∂ssen | 590 –º | 1900 –º | ‚â• 2900 –º |
| Innsbruck | 578 –º | 2600 –º | ‚â• 3600 –º |
| Greifenburg | 600 –º | 2800 –º | ‚â• 3800 –º |
| Speikboden | 950 –º | 2500 –º | ‚â• 3500 –º |
| Bassano | 130 –º | 1700 –º | ‚â• 2700 –º |

`peaks` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –±–∞–∑—É –æ–±–ª–∞–∫–æ–≤ –¥–ª—è XC.
`base_margin = cloudbase_msl ‚àí peaks`. –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π margin = –ª–µ—Ç–µ—Ç—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.

Hard Rule 3 (v2.0): `cloudbase_min < 2000m` ‚Üí max MAYBE ‚Äî —ç—Ç–æ **–∞–±—Å–æ–ª—é—Ç–Ω—ã–π** –ø–æ—Ä–æ–≥,
–Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ peaks. –î–∞–∂–µ –≤ Bassano (peaks=1700) –±–∞–∑–∞ 1900m = max MAYBE.

---

## 15. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ | –í–ª–∏—è–Ω–∏–µ |
|-------------|---------|
| W* –∑–∞–≤–∏—Å–∏—Ç –æ—Ç GFS | –ë–µ–∑ GFS ‚Äî –Ω–µ—Ç W* (returns None), thermal window = 0 ‚Üí base score = ‚àí6 |
| ICON updraft ‚Äî —Ç–æ–ª—å–∫–æ ICON D2 ‚â§48—á | –î–ª—è D+3 –∏ –¥–∞–ª–µ–µ updraft –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (EU/Global –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç null) |
| LI —Ç–æ–ª—å–∫–æ GFS | –ë–µ–∑ GFS ‚Äî –Ω–µ—Ç VERY_UNSTABLE |
| –ù–µ—Ç –¥–µ—Ç–µ–∫—Ü–∏–∏ —Ñ—ë–Ω–∞ | –Æ–∂–Ω—ã–π –ø–æ—Ç–æ–∫ + —Å—É—Ö–æ–π –≤–æ–∑–¥—É—Ö –Ω–∞ 700hPa –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è |
| Scoring –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–∏–ø XC | –û–¥–Ω–∞ —à–∫–∞–ª–∞ –¥–ª—è –≤—Å–µ—Ö –¥–∏—Å—Ç–∞–Ω—Ü–∏–π |
| Per-model assessment —É–ø—Ä–æ—â—ë–Ω | 4 —É—Ä–æ–≤–Ω—è –≤–º–µ—Å—Ç–æ 6, –Ω–µ—Ç –ø–æ–ª–Ω–æ–≥–æ flag analysis |
| MP integration –∑–∞–≤–∏—Å–∏—Ç –æ—Ç scraper | –ë–µ–∑ Docker / --no-scraper ‚Äî –Ω–µ—Ç MP –¥–∞–Ω–Ω—ã—Ö |
| Null vs 0 | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ = None/null/dash, **–Ω–∏–∫–æ–≥–¥–∞ 0**. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ scoring |
| Thermal window gaps | –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è ‚Äî —Å—á–∏—Ç–∞—é—Ç—Å—è –≤—Å–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —á–∞—Å—ã |
